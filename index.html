<!DOCTYPE html>
<html>
  <head>
    <title>fasster: forecasting with state switching</title>
    <meta charset="utf-8">
    <meta name="author" content="Mitchell Oâ€™Hara-Wild" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/vis/vis.min.css" rel="stylesheet" />
    <script src="libs/vis/vis.min.js"></script>
    <link href="libs/timeline/timevis.css" rel="stylesheet" />
    <script src="libs/timevis-binding/timevis.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap/js/bootstrap.min.js"></script>
    <script src="libs/bootstrap/shim/html5shiv.min.js"></script>
    <script src="libs/bootstrap/shim/respond.min.js"></script>
    <link rel="stylesheet" href="libs/slides.css" type="text/css" />
    <link rel="stylesheet" href="libs/animate.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: inverse 



.title[fasster]
.sticker-float[![fasster](resources/fasster.png)]

## Forecasting multiple seasonality with state switching

.bottom[
### Mitchell O'Hara-Wild (&lt;svg style="height:0.8em;top:.04em;position:relative;fill:#1da1f2;" viewBox="0 0 512 512"&gt;&lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/&gt;&lt;/svg&gt;[@mitchoharawild](https://twitter.com/mitchoharawild))
&lt;br&gt;
### July 13th 2018

### Slides @ [mitchelloharawild.com/useR18/](http://mitchelloharawild.com/useR18/)
]
---

.sticker-float[![fable](resources/fable.svg)]

# Extending fable

**fasster** objects are consistent with the **fable** package.

Which provides:

- Plotting of forecasts and components
- Model extraction methods
- Accuracy measures
- Residual diagnostics

---

# Sub-daily difficulty
![](index_files/figure-html/elecMonthly-1.png)&lt;!-- --&gt;

---

# Sub-daily difficulty
![](index_files/figure-html/elecDaily-1.png)&lt;!-- --&gt;

---

# Sub-daily difficulty
![](index_files/figure-html/elecPlot-1.png)&lt;!-- --&gt;
---


## Models for multiple seasonality
<div id="htmlwidget-d7e97da393558de1b062" class="timevis html-widget" style="width:100%;height:250px;">
<div class="btn-group zoom-menu">
<button type="button" class="btn btn-default btn-lg zoom-in" title="Zoom in">+</button>
<button type="button" class="btn btn-default btn-lg zoom-out" title="Zoom out">-</button>
</div>
</div>
<script type="application/json" data-for="htmlwidget-d7e97da393558de1b062">{"x":{"items":[{"id":"1","content":"MSARIMA","start":"2000","group":"ss"},{"id":"2","content":"DSHW","start":"2003","group":"ss"},{"id":"3","content":"BATS/TBATS","start":"2010","group":"ss"},{"id":"4","content":"MLR","start":"2000","group":"reg"},{"id":"5","content":"GAM","start":"2000","group":"reg"},{"id":"6","content":"Prophet","start":"2017","group":"reg"}],"groups":[{"id":"ss","content":"State Space"},{"id":"reg","content":"Regression"}],"showZoom":false,"zoomFactor":0.5,"fit":true,"options":{"zoomable":false},"height":"250px","api":[]},"evals":[],"jsHooks":[]}</script>

&lt;table class="table"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Model&lt;/th&gt;
      &lt;th&gt;Flexible&lt;/th&gt;
      &lt;th&gt;Speed&lt;/th&gt;
      &lt;th&gt;Exogenous Regressors&lt;/th&gt;
      &lt;th&gt;Accuracy&lt;/th&gt;
      &lt;th&gt;Decompose Components&lt;/th&gt;
      &lt;th&gt;Evolving Terms&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Regression&lt;/td&gt;
      &lt;td class="success"&gt;Yes&lt;/td&gt;
      &lt;td class="success"&gt;Fast&lt;/td&gt;
      &lt;td class="success"&gt;Yes&lt;/td&gt;
      &lt;td class="warning"&gt;Okay&lt;/td&gt;
      &lt;td class="danger"&gt;No&lt;/td&gt;
      &lt;td class="danger"&gt;No&lt;/td&gt;
    &lt;tr&gt;
      &lt;td&gt;State&amp;nbspSpace&lt;/td&gt;
      &lt;td class="danger"&gt;No&lt;/td&gt;
      &lt;td class="danger"&gt;Slow&lt;/td&gt;
      &lt;td class="danger"&gt;No&lt;/td&gt;
      &lt;td class="warning"&gt;Okay&lt;/td&gt;
      &lt;td class="success"&gt;Yes&lt;/td&gt;
      &lt;td class="success"&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

.center[(this table is a *massive* generalisation)]

---
class: inverse

.sticker-float[![fasster](resources/fasster.png)]
# What is fasster?

### *Forecasting with Additive Switching of Seasonality, Trend &amp; Exogenous Regressors*

&lt;br&gt; &lt;br&gt; 

### A state space model with the speed and flexibility of regression models

---

# Flexible model specification
.large-code[

```r
log(y + 1) ~ poly(1) + seas(24) + trig(24*365.25, 10) + x + z^2
```
]

### poly(n): Polynomials
### seas(s): Seasonal factors
### trig(s, q): Seasonal fourier terms
### ARMA(ar, ma): ARMA processes
### xreg: Exogenous regressors

---

# %S%: State switching

```r
y ~ DayType %S% (poly(1) + trig(48, 14))
```


![](index_files/figure-html/switching-1.png)&lt;!-- --&gt;


---

# Usage Example (Electricity Demand)


```r
*library(tsibble)
*library(fasster)

elec_tr &lt;- tsibbledata::elecdemand %&gt;%
  filter(index &lt; ymd("2014-03-01"))

elec_fit &lt;- elec_tr %&gt;%
  fasster(log(Demand) ~ WorkDay %S% (trig(48, 16) + poly(1)) + Temperature + Temperature^2)

summary(elec_fit)
```


---

# Components

Insert component decomposition plot here... perhaps too complicated to discuss

```r
components(elec_fit)
```

---

# Forecasts (Electricity demand)

![](index_files/figure-html/elecfc-1.png)&lt;!-- --&gt;


---

# Interpolation

Insert missing value plots here, filled with fasster modelled fits
Visually compare with actual values

---

# Streaming data

Animation here

---
class: inverse, top

.sticker-float[![fasster](resources/fasster.png)]
&lt;br&gt;
.center[
# The fasster package
]

&lt;br&gt;
&lt;br&gt;

The **development** version can be installed from GitHub using:


```r
# install.packages("devtools")
devtools::install_github("mitchelloharawild/fasster")
```
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
